---
title: "Relatório - 2022"
site: distill::distill_website
---


```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE)
knitr::knit_hooks$set(mysize = function(before, options, envir) {
  if (before) 
    return(options$size)
})
knitr::opts_chunk$set(size='\\small')
knitr::opts_chunk$set(warning=FALSE)
knitr::opts_chunk$set(message=FALSE)
knitr::opts_chunk$set(fig.align='center')

library(tidyverse)
library(formattable)
library(kableExtra)
library(janitor)
library(ggrepel)
library(knitr)
library(DT)
library(viridis)
library(hrbrthemes)
library(readxl)
library(itan)
library(gridExtra)
library(grid)
library(reactable)
library(crosstalk)
library(png)
library(grid)
library(gridExtra)


knitr::opts_chunk$set(tidy = FALSE,
                      fig.width = 10,
                      fig.height = 8,
                      warning = FALSE,
                      message =FALSE,
                      echo = FALSE)


### ideias para analisar
# https://github.com/rfortherestofus/api-food-asset-map
# Learn more about creating websites with Distill at:
# https://rstudio.github.io/distill/website.html

```


```{css}
d-title {
    visibility: hidden;
    height: 0px;
  }
```


```{r, layout="l-screen-inset" , fig.align='center' }
knitr::include_graphics("images/barra.png")
```
```{r,  fig.align='center',  out.width="20%"}
knitr::include_graphics("images/caf.png")
```

<div  class="cabecalho" >
<span><p style= 'text-align:center'>
<br> 
Avaliação Diagnóstica 2022 
</p></span></div>
<div  class="cabecalho2" >
<span><p style= 'text-align:center'>
Relatório Geral da Rede 
</p></span></div>



```{r, layout="l-screen-inset" , fig.align='center' }
knitr::include_graphics("images/barra.png")
```

<div  class="full-width" style='background-color:#F4792A;color:#000000'>
<span><p style= 'text-align:center'>
<b>Seja bem-vindo(a)! </b><br/>
 Navegue na página clicando nos links ou rolando a tela do seu computador/celular.<br/>
</p></span></div><br>
<br>


# SEÇÕES
 - [Apresentação](#apresenta%C3%A7%C3%A3o)
 - [Taxa de Participação](#taxa-de-participa%C3%A7%C3%A3o)
 - [Níveis de Desempenho ](#níveis-de-desempenho) 
 - [Distribuição de estudantes por ano de escolaridade em cada nível de desempenho](#-de-estudantes-por-ano-de-escolaridade-em-cada-nível-de-proficiência) 
 - [Percentual de acertos por ano de escolaridade](#Percentual-de-acertos-por-ano-de-escolaridade) 
 - [Rendimento das escolas por ano de escolaridade e disciplina](#Rendimento-das-escolas-por-ano-de-escolaridade-e-disciplina) 
 

## Apresentação


A Avaliação Diagnóstica 2022 objetiva produzir informações sobre a situação de aprendizagem dos estudantes do ensino fundamental da Rede Municipal de Educação de Niterói, que possibilitem potencializar as ações pedagógicas desenvolvidas no município, bem como (re)formular políticas públicas educacionais. 

Tendo em vista a compreensão do cenário da educação de Niterói no contexto de pós-pandemia, consideramos fundamental a aplicação de instrumentos avaliativos que colaborem para a produção de um diagnóstico sobre a aprendizagem dos estudantes, a fim de que os esforços de professores e gestores (escolares e da Secretaria) estejam voltados para as necessidades identificadas. 
Desse modo, a Avaliação Diagnóstica 2022 constitui-se como um dos instrumentos necessários para a verificação das habilidades já desenvolvidas pelos estudantes. Trata-se de uma avaliação padronizada, aplicada aos estudantes do 3º, 4º, 6º e 8º anos do ensino fundamental, formulada com questões de Língua Portuguesa e Matemática, baseadas na Teoria de Resposta ao Item (TRI). As competências avaliadas envolvem leitura e resolução de problemas. Para a elaboração das avaliações a Casa de Avaliação e Formação (CAF) contou com a parceria de professores da Rede, responsáveis pela produção dos itens de prova.
Os resultados apresentados neste Relatório Geral são expressos em níveis progressivos, de acordo com o número de acertos na avaliação, o que pressupõe uma organização do menor para o maior desempenho (do Nível 1 ao Nível 5). As informações apuradas estão disponibilizadas na seguinte ordem:
* Níveis de desempenho alcançados pelos estudantes avaliados;
* Percentual de estudantes, por ano de escolaridade, em cada nível de desempenho;
*	Percentual de acerto dos estudantes por ano de escolaridade;
* Rendimento das escolas por ano de escolaridade e disciplina.

Este Relatório estará disponível em ambiente virtual e será socializado com as equipes que atuam na Secretaria para discussão coletiva. Contamos com a parceria de todos para que os dados aqui apresentados sejam observados e propiciem ações que contribuam para a correção de rumos das estratégias pedagógicas adotadas na Rede de Niterói.


## Taxa de Participação 

O gráfico abaixo apresenta um comparativos entre o percentual de estudantes escolhidos para para participar da Avaliação Diagnóstica 2022 presentes e ausentes.



Participação por ano de escolaridade






## Níveis de Desempenho 

Os níveis de desempenho foram estabelecidos de forma progressiva, considerando o quantitativo de acerto dos estudantes nas provas, conforme tabela a seguir:

```{r , echo=FALSE, out.width='100%'}

rendimento <- data.frame(
  "MÉDIA DO RENDIMENTO" = c("0,0 a 2,9", "3,0 a 4,9" ,"5,0 a 6,9", "7,0 a 8,9" , "9,0 a 10,0"),
  "NÍVEL DE PROFICIÊNCIA" = c("Nível 1" , "Nível 2" , "Nível 3", "Nível 4", "Nível 5")
)

colnames(rendimento)[1] <- "MÉDIA DO RENDIMENTO"
colnames(rendimento)[2] <- "NÍVEL DE PROFICIÊNCIA"

kable(as_tibble(rendimento), align="cc", booktabs = TRUE) %>%
  kable_styling(bootstrap_options = "striped",  full_width = F, position = "center")%>%
  kable_styling(fixed_thead = T)%>%
   row_spec(1, background = "#ffe4cc")%>%
   row_spec(2, background = "#ffe4cc")%>%
   row_spec(3, background = "#ffe4cc")%>%
   row_spec(4, background = "#F4792A")%>%
   row_spec(5, background = "#F4792A")%>%
   kable_classic_2(full_width = F)

```

Faz-se necessário saleintar que os resultados apresentados abaixo consideram apenas os dados relacionados aos estudantes que realizaram a avaliação. 

## Distribuição dos estudantes por ano de escolaridade em cada nível de desempenho 


### Geral     

A tabela abaixo apresenta o percentual de estudantes em cada um dos níveis por ano  de escolaridade. 

```{r , echo=FALSE, out.width='100%'}

niveis <- readRDS("Niveis_Percent.RDS")

orange_pal <- function(x) rgb(colorRamp(c("#ffe4cc", "#ff9500"))(x), maxColorValue = 255)
orange <- function(x) rgb(colorRamp(c("#ffe4cc", "#ffe4cc"))(x), maxColorValue = 255)


reactable(
  niveis,
  defaultColDef = colDef(
    align = "center" ),
  columns = list( 
    `Nível 5` = colDef(style = function(value) {    
            color <- if (value >= 0.30) { "#ff9500"  } else  {   "#FFFFFF" } 
        list(background = color) }, 
        format = colFormat(percent = TRUE, digits = 2) ),
    `Nível 4` = colDef(style = function(value) {    
            color <- if (value >= 0.30) {   "#ff9500"     } else  {    "#FFFFFF"  }
        list(background = color) },
        format = colFormat(percent = TRUE, digits = 2) ),
     `Nível 3` = colDef(style = function(value) {    
            color <- if (value >= 0.30) {  "#ff9500" } else  {  "#FFFFFF" } 
            list(background = color) },
        format = colFormat(percent = TRUE, digits = 2) ),
      `Nível 2` = colDef(style = function(value) {    
            color <- if (value >= 0.30) {   "#ff9500" } else  { "#FFFFFF" } 
          list(background = color) },
        format = colFormat(percent = TRUE, digits = 2) ),
       `Nível 1` = colDef(style = function(value) {    
            color <- if (value >= 0.30) { "#ff9500"  } else  {   "#FFFFFF" }
            list(background = color) },
        format = colFormat(percent = TRUE, digits = 2) )
   )
      , highlight = TRUE,
    bordered = FALSE
)


# 
# reactable(
#   niveis,
#   defaultColDef = colDef(
#     align = "center"
#   ),
#   columns = list( 
#     `Nível 5` = colDef(style = function(value) {    normalized <- (value - min(niveis$`Nível 5`)) / (max(niveis$`Nível 5`) - min(niveis$`Nível 5`))
#              color <- orange_pal(normalized)
#              list(background = color)
#             },  format = colFormat(percent = TRUE, digits = 2) ),
#     `Nível 4` = colDef(style = function(value) { normalized <- (value - min(niveis$`Nível 4`)) / (max(niveis$`Nível 4`) - min(niveis$`Nível 4`))
#       color <- orange_pal(normalized)
#       list(background = color)
#     },   format = colFormat(percent = TRUE, digits = 2) ),
#         `Nível 3` = colDef(style = function(value) { normalized <- (value - min(niveis$`Nível 3`)) / (max(niveis$`Nível 3`) - min(niveis$`Nível 3`))
#       color <- orange(normalized)
#       list(background = color)
#     },   format = colFormat(percent = TRUE, digits = 2) ),
#         `Nível 2` = colDef(style = function(value) { normalized <- (value - min(niveis$`Nível 2`)) / (max(niveis$`Nível 2`) - min(niveis$`Nível 2`))
#       color <- orange(normalized)
#       list(background = color)
#     },   format = colFormat(percent = TRUE, digits = 2) ),
#      `Nível 1` = colDef(style = function(value) { normalized <- (value - min(niveis$`Nível 1`)) / (max(niveis$`Nível 1`) - min(niveis$`Nível 1`))
#       color <- orange(normalized)
#       list(background = color)
#     },   format = colFormat(percent = TRUE, digits = 2) )
#   ), highlight = TRUE,
#     bordered = FALSE
# )







```

### 3º ano     



```{r , echo=FALSE, out.width = "95%", out.height= "95%"}

niveis_quant <- readRDS("Niveis_Quant.RDS")

niveis_pivot <- niveis_quant %>% 
  pivot_longer( !` `,  names_to = "Níveis", values_to = "Quantitativo")

niveis_3 <- niveis_pivot %>% filter( ` ` == "3º ano")

niveis_3$` ` <- NULL

niveis_3 <- niveis_3[-6,]

p<-ggplot(niveis_3, aes(x=Níveis, y=Quantitativo, color=Níveis)) +
  geom_bar(stat="identity", fill="white")+ geom_text(aes(label=Quantitativo),   vjust=-0.4,  size=5)+ xlab(" ")
p+scale_color_manual(values=c("#143A78", "#143A78", "#143A78", "#2E8B57", "#2E8B57"))+ theme(legend.position="none") 


```

### 4º ano  



```{r , echo=FALSE, out.width = "95%", out.height= "95%"}


niveis_4 <- niveis_pivot %>% filter( ` ` == "4º ano")

niveis_4$` ` <- NULL

niveis_4 <- niveis_4[-6,]

p<-ggplot(niveis_4, aes(x=Níveis, y=Quantitativo, color=Níveis)) +
  geom_bar(stat="identity", fill="white")+ geom_text(aes(label=Quantitativo),   vjust=-0.4,  size=5)+ xlab(" ")
p+scale_color_manual(values=c("#143A78", "#143A78", "#143A78", "#2E8B57", "#2E8B57"))+ theme(legend.position="none") 


```


### 6º ano   



```{r , echo=FALSE, out.width = "95%", out.height= "95%"}


niveis_6 <- niveis_pivot %>% filter( ` ` == "6º ano")

niveis_6$` ` <- NULL

niveis_6 <- niveis_6[-6,]

p<-ggplot(niveis_6, aes(x=Níveis, y=Quantitativo, color=Níveis)) +
  geom_bar(stat="identity", fill="white")+ geom_text(aes(label=Quantitativo),   vjust=-0.4,  size=5)+ xlab(" ")
p+scale_color_manual(values=c("#143A78", "#143A78", "#143A78", "#2E8B57", "#2E8B57"))+ theme(legend.position="none") 


```

### 8º ano

 

```{r , echo=FALSE, out.width = "95%", out.height= "95%"}


niveis_8 <- niveis_pivot %>% filter( ` ` == "8º ano")

niveis_8$` ` <- NULL

niveis_8 <- niveis_8[-6,]

p<-ggplot(niveis_8, aes(x=Níveis, y=Quantitativo, color=Níveis)) +
  geom_bar(stat="identity", fill="white")+ geom_text(aes(label=Quantitativo),   vjust=-0.4,  size=5)+ xlab(" ")
p+scale_color_manual(values=c("#143A78", "#143A78", "#143A78", "#2E8B57", "#2E8B57"))+ theme(legend.position="none") 


```


## Percentual de acertos por ano de escolaridade 

A análise abaixo apresenta os percentuais de acertos por disciplina e ano de escolaridade. Espera-se que tais gráficos permitam uma análise macro dos itens relacionados às provas disponíveis nos seguintes endereços:




### 3º ano

<a href="https://fmeniteroi-my.sharepoint.com/:b:/g/personal/caf_educacao_niteroi_rj_gov_br/EQlsyaU1sYdBi8mBXkJ5f-cBMlYAolbkInltLCdtcbxPDA?e=5aSF34" target="_blank">3º ano - Português </a> 

<a href="https://fmeniteroi-my.sharepoint.com/:b:/g/personal/caf_educacao_niteroi_rj_gov_br/ESx46vqosT1Nj4e2idjPAz4B-vKBxfRxdgDSMWl2_w0GeQ?e=1i4A39" target="_blank">3º ano - Matemática </a> 

```{r , echo=FALSE,  out.width = "95%", out.height= "95%"}


acertos <-  readRDS("acertos_3.RDS")

acertos_P <- acertos[-c(11:20),]

# Reorder following the value of another column:
p1<- acertos_P  %>%
  ggplot( aes(x=fct_inorder(Questões), y=`Percentual de Acerto`)) +
    geom_bar(stat="identity", fill="#F4792A", alpha=.6, width=.4) +
   geom_text(aes(label=`Percentual de Acerto`),   hjust=1.5,  size=4)+
    coord_flip() +
    xlab("") +
    theme_bw()
 

acertos_M <- acertos[-c(1:10),]

# Reverse side
p2 <- acertos_M  %>%
  ggplot(aes(x=fct_inorder(Questões), y=`Percentual de Acerto`)) +
    geom_bar(stat="identity", fill="#F4792A", alpha=.6, width=.4) +
   geom_text(aes(label=`Percentual de Acerto`),   hjust=1.5,  size=4)+
    coord_flip() +
    xlab("") +
    theme_bw()

grid.arrange(p1, p2, ncol = 2)


```



### 4º ano

<a href="https://fmeniteroi-my.sharepoint.com/:b:/g/personal/caf_educacao_niteroi_rj_gov_br/EfgXl5r2hmhMr2VYDY-VjeAB4bpYBgcJ8lkRIPnBVNWOXw?e=JNHmDc" target="_blank">4º ano</a> 


```{r , echo=FALSE, out.width = "95%", out.height= "95%"}


acertos <-  readRDS("acertos_4.RDS")

acertos_P <- acertos[-c(11:20),]

# Reorder following the value of another column:
p1<- acertos_P  %>%
  ggplot( aes(x=fct_inorder(Questões), y=`Percentual de Acerto`)) +
    geom_bar(stat="identity", fill="#F4792A", alpha=.6, width=.4) +
   geom_text(aes(label=`Percentual de Acerto`),   hjust=1.5,  size=4)+
    coord_flip() +
    xlab("") +
    theme_bw()
 

acertos_M <- acertos[-c(1:10),]

# Reverse side
p2 <- acertos_M  %>%
  ggplot(aes(x=fct_inorder(Questões), y=`Percentual de Acerto`)) +
    geom_bar(stat="identity", fill="#F4792A", alpha=.6, width=.4) +
   geom_text(aes(label=`Percentual de Acerto`),   hjust=1.5,  size=4)+
    coord_flip() +
    xlab("") +
    theme_bw()

grid.arrange(p1, p2, ncol = 2)


```


### 6º ano

<a href="https://fmeniteroi-my.sharepoint.com/:b:/g/personal/caf_educacao_niteroi_rj_gov_br/EXRh6kS77clNinpH6GIyokoBbQGikVeE2wDJgZfY7IPQMw?e=ZnOrut" target="_blank">6º ano</a> 

```{r , echo=FALSE, out.width = "95%", out.height= "95%"}


acertos <-  readRDS("acertos_6.RDS")

acertos_P <- acertos[-c(11:20),]

# Reorder following the value of another column:
p1<- acertos_P  %>%
  ggplot( aes(x=fct_inorder(Questões), y=`Percentual de Acerto`)) +
    geom_bar(stat="identity", fill="#F4792A", alpha=.6, width=.4) +
   geom_text(aes(label=`Percentual de Acerto`),   hjust=1.5,  size=4)+
    coord_flip() +
    xlab("") +
    theme_bw()
 

acertos_M <- acertos[-c(1:10),]

# Reverse side
p2 <- acertos_M  %>%
  ggplot(aes(x=fct_inorder(Questões), y=`Percentual de Acerto`)) +
    geom_bar(stat="identity", fill="#F4792A", alpha=.6, width=.4) +
   geom_text(aes(label=`Percentual de Acerto`),   hjust=1.5,  size=4)+
    coord_flip() +
    xlab("") +
    theme_bw()

grid.arrange(p1, p2, ncol = 2)


```



### 8º ano

<a href="https://fmeniteroi-my.sharepoint.com/:b:/g/personal/caf_educacao_niteroi_rj_gov_br/EY5_RtMPwKpEhVVxswIfo5IBuinTq8NlohZKflV_Ofm9KA?e=FSHYmq" target="_blank">8º ano</a> 



```{r , echo=FALSE, out.width = "95%", out.height= "95%"}


acertos <-  readRDS("acertos_8.RDS")

acertos_P <- acertos[-c(11:20),]

# Reorder following the value of another column:
p1<- acertos_P  %>%
  ggplot( aes(x=fct_inorder(Questões), y=`Percentual de Acerto`)) +
    geom_bar(stat="identity", fill="#F4792A", alpha=.6, width=.4) +
   geom_text(aes(label=`Percentual de Acerto`),   hjust=1.5,  size=4)+
    coord_flip() +
    xlab("") +
    theme_bw()
 

acertos_M <- acertos[-c(1:10),]

# Reverse side
p2 <- acertos_M  %>%
  ggplot(aes(x=fct_inorder(Questões), y=`Percentual de Acerto`)) +
    geom_bar(stat="identity", fill="#F4792A", alpha=.6, width=.4) +
   geom_text(aes(label=`Percentual de Acerto`),   hjust=1.5,  size=4)+
    coord_flip() +
    xlab("") +
    theme_bw()

grid.arrange(p1, p2, ncol = 2)


```

## Rendimento das escolas por ano de escolaridade e disciplina 




### 3º ano     


```{r , echo=FALSE, out.width='100%' }

result <-  readRDS("Resultado_escola_3.RDS")


reactable(
  result,
  defaultColDef = colDef(
    align = "center" ),
  columns = list( 
    `Média Geral` = colDef(style = function(value) {    
            color <- if (value >= 9.0) { "#ff9500"  } else  {   "#FFFFFF" } 
        list(background = color) } , width = 120),
    `Média Português` = colDef(style = function(value) {    
            color <- if (value >= 9.0) {   "#ff9500"     } else  {    "#FFFFFF"  }
        list(background = color) } , width = 120),
     `Média Matemática` = colDef(style = function(value) {    
            color <- if (value >= 9.0) {  "#ff9500" } else  {  "#FFFFFF" } 
            list(background = color) } , width = 120)
   )
      , highlight = TRUE,
    bordered = FALSE
)

```

### 4º ano  

```{r , echo=FALSE, out.width='100%'}

result <-  readRDS("Resultado_escola_4.RDS")


reactable(
  result,
  defaultColDef = colDef(
    align = "center" ),
  columns = list( 
    `Média Geral` = colDef(style = function(value) {    
            color <- if (value >= 9.0) { "#ff9500"  } else  {   "#FFFFFF" } 
        list(background = color) } , width = 120),
    `Média Português` = colDef(style = function(value) {    
            color <- if (value >= 9.0) {   "#ff9500"     } else  {    "#FFFFFF"  }
        list(background = color) } , width = 120),
     `Média Matemática` = colDef(style = function(value) {    
            color <- if (value >= 9.0) {  "#ff9500" } else  {  "#FFFFFF" } 
            list(background = color) } , width = 120)
   )
      , highlight = TRUE,
    bordered = FALSE
)

```

### 6º ano   


```{r , echo=FALSE, out.width='100%'}

result <-  readRDS("Resultado_escola_6.RDS")


reactable(
  result,
  defaultColDef = colDef(
    align = "center" ),
  columns = list( 
    `Média Geral` = colDef(style = function(value) {    
            color <- if (value >= 9.0) { "#ff9500"  } else  {   "#FFFFFF" } 
        list(background = color) } , width = 120),
    `Média Português` = colDef(style = function(value) {    
            color <- if (value >= 9.0) {   "#ff9500"     } else  {    "#FFFFFF"  }
        list(background = color) } , width = 120),
     `Média Matemática` = colDef(style = function(value) {    
            color <- if (value >= 9.0) {  "#ff9500" } else  {  "#FFFFFF" } 
            list(background = color) } , width = 120)
   )
      , highlight = TRUE,
    bordered = FALSE
)

```


### 8º ano


```{r , echo=FALSE, out.width='100%'}

result <-  readRDS("Resultado_escola_8.RDS")


reactable(
  result,
  defaultColDef = colDef(
    align = "center" ),
  columns = list( 
    `Média Geral` = colDef(style = function(value) {    
            color <- if (value >= 9.0) { "#ff9500"  } else  {   "#FFFFFF" } 
        list(background = color) } , width = 120),
    `Média Português` = colDef(style = function(value) {    
            color <- if (value >= 9.0) {   "#ff9500"     } else  {    "#FFFFFF"  }
        list(background = color) } , width = 120),
     `Média Matemática` = colDef(style = function(value) {    
            color <- if (value >= 9.0) {  "#ff9500" } else  {  "#FFFFFF" } 
            list(background = color) } , width = 120)
   )
      , highlight = TRUE,
    bordered = FALSE
)

```